{% load crispy_forms_tags %}
<div class="w-full pt-0 p-10 bg-gray-100 text-xl">
    <br>
    รายละเอียดประกาศรับสมัคร
    <br>
</div>

  <body class="w-full pt-0 bg-white">
    <div class="container mx-auto p-4">
        <table class="w-full table-auto">
            <thead>
                {% if i.img_activity %}
                <th class="border px-2 py-3 invisible md:visible flex justify-around"><img src="{{i.img_activity.url}}" alt="Recruitment_announcer/media/activity/images" width="250" height="250"></th>
                {% endif %}
                <td class="border px-4 py-3 text-lg">ชื่อกิจกรรม : {{i.activity_name}}<br>
                <br>
                ด้านที่ : {{i.activity_type}}<br>
                <br>
                วันที่เปิดรับสมัคร : {{i.start_date_create_activity}} - {{i.due_date_create_activity}}<br>
                <br>
                จำนวนเป้าหมาย : {{i.target_number}}<br>
                </td>
            </thead>
        </table>
        <table class="w-full table-auto">
            <thead>
                <td class="border px-4 py-3">
                    สถานที่จัดกิจกรรม : {{i.place}}<br>
                    <br>
                    วันที่จัดกิจกรรม : {{i.start_date_activity}} - {{i.due_date_activity}}<br>
                    <br>
                    ผู้รับผิดชอบโครงการ : {{i.person_responsible_project}}<br>
                    <br>
                    ที่ปรึกษาโครงการ : {{i.project_consultant}}<br>
                    <br>
                    คำอธิบาย : {{i.description}}<br>
                    <br>
                    หน่วยกิตกิจกรรม : {{i.credit}}
                    <br>
                    <div class="text-center">
                            <!-- <a class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 focus:outline-none focus:shadow-outline">ลงทะเบียนเข้าร่วมกิจกรรม</a><br> -->
                            <form id="activity-form" action="" method="post">
                                <h1 class="text-center"></h1>
                                    {% csrf_token %}
                                    {{ form|crispy }}
                                <div class="text-center">
                                    <button id="activity-button" type="submit" class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 focus:outline-none focus:shadow-outline">ลงทะเบียนเข้าร่วมกิจกรรม</button><br>
                                </div>
                                <script>
                                    // เพิ่มการดักเหตุการณ์เมื่อกดปุ่ม
                                    document.getElementById("activity-form").addEventListener("submit", function(event) {
                                        event.preventDefault(); // ป้องกันการส่งแบบฟอร์ม
                                
                                        // ดึงข้อมูลจากปุ่ม
                                        var button = document.getElementById("activity-button");
                                
                                        // ตรวจสอบสถานะปุ่ม
                                        if (button.textContent == "ลงทะเบียนเข้าร่วมกิจกรรม") {
                                            // เปลี่ยนข้อความปุ่มเป็น "ยกเลิกลงทะเบียนเข้าร่วมกิจกรรม"
                                            button.textContent = "ยกเลิกลงทะเบียนเข้าร่วมกิจกรรม";
                                
                                            // ดำเนินการส่งแบบฟอร์ม
                                            this.submit();
                                        } else {
                                            // เปลี่ยนข้อความปุ่มกลับเป็น "ลงทะเบียนเข้าร่วมกิจกรรม"
                                            button.textContent = "ลงทะเบียนเข้าร่วมกิจกรรม";
                                        }
                                    });
                                </script>
                        </form>
                    </div>     
            </thead>
        </table>
    </div>
  </body>
<div class="text-center">
    วันที่จัด
</div>
<!-- {% if messages %}
<ul class="messages">
  {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
  {% endfor %}
</ul>
{% endif %} -->
<br>
{{i.activity_name}}<br>
นักศึกษาที่ลงทะเบียน<br>
{% for i in db %}
{{i}}<br>
<!-- {{i.activity.activity_name}}<br> -->
{{i.student}}
{{i.student.first_name}}
{{i.student.last_name}}
{{i.student.faculty}}<br>
{{i.status}}<br>
{% endfor %}
{{existing_registration}}<br>
{{activity_get_all}}
<!-- <script>
    // เพิ่มการดักเหตุการณ์เมื่อกดปุ่ม
    document.getElementById("activity-form").addEventListener("submit", function(event) {
        event.preventDefault(); // ป้องกันการส่งแบบฟอร์ม

        // ดึงข้อมูลจากปุ่ม
        var button = document.getElementById("activity-button");

        // ตรวจสอบสถานะปุ่ม
        if (button.textContent == "ลงทะเบียนเข้าร่วมกิจกรรม") {
            // เปลี่ยนข้อความปุ่มเป็น "ยกเลิกลงทะเบียนเข้าร่วมกิจกรรม"
            button.textContent = "ยกเลิกลงทะเบียนเข้าร่วมกิจกรรม";

            // ดำเนินการส่งแบบฟอร์ม
            // this.submit();
        } else {
            // เปลี่ยนข้อความปุ่มกลับเป็น "ลงทะเบียนเข้าร่วมกิจกรรม"
            button.textContent = "ลงทะเบียนเข้าร่วมกิจกรรม";
        }
    });
</script> -->